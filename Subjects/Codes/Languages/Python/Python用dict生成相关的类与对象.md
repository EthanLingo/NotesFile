# Python用dict生成相关的类与对象



tags: #日期/2023-01-04 #类型/笔记 #类型/解决 #类型/借鉴 #内容/编程语言/Python #内容/类与对象 #内容/字典 



# 需求


想到平时在IDE（例如Visual Studio Code）使用字典`dict`的时候，如果不使用一些插件，键值对往往不会智能提示，那么这个时候就想能否让字典数据像类字段那样有智能提示。


# 解决

这里有一个字典dict：

```python
dict1={'a':1,'b':2,'c':3}
```


这时候有两种方法用字典dict对象生成相关的类与对象

### 方法一：

首先构造一个类。这里使用了`python`内置的`type()`函数。生成的类`Class1`直接植入了`dict1`
```python
Class1=type("Class1",(object,),dict1)
```

然后构建一个对象
```python
obj1=Class1()
```

最后就可以像类之属性那样使用字典键值对啦！IDE一般会智能提示对象的。

```python
obj1.a

# 输出：
# 1
```


### 方法二：

首先构造一个类。
```python
class Class2(dict):
	def __init__(self,*args,**kwargs):
		super(Class2,self).__init__(*args,**kwargs)
		self.__dict__=self
```

然后构建一个对象
```python
obj2=Class2(dict1)
```

最后就可以像类之属性那样使用字典键值对啦！IDE一般会智能提示对象的。

```python
obj2.a

# 输出：
# 1
```



### 说明

上面两个方法在使用形式上差异在于，方法一`obj1`可以显示的列表只包含自定义的键`'a','b','c'`，方法二`obj2`可以显示的列表与任何`dict`对象列表一致，换句话说，除了自定义的键，还包括诸如`'keys()','copy()','__hash__'`等方法和对象。

两个方法缺点都是一样的，很不稳定！就像字典那样，可以随意增删查改键值对。因此使用的时候键值对容易被覆盖或者新增无用或者错误的数据。上述方法作为黑魔法，慎用！

方法二的原理是，本质上所有python对象都将其属性存储在字典`__dict__`中。因此将父类`dict`之对象`dict1`之所有字段和方法调用给了`Class2`之实例`obj2`。



# 参考

> - [Python type()函数：动态创建类](http://c.biancheng.net/view/2292.html#:~:text=Python%20type%20%28%29函数：动态创建类%201%20第一种语法格式用来查看某个变量（类对象）的具体类型，obj%20表示某个变量或者类对象%E3%80%82,2%20第二种语法格式用来创建类，其中%20name%20表示类的名称；bases%20表示一个元组，其中存储的是该类的父类；dict%20表示一个字典，用于表示类内定义的属性或者方法%E3%80%82)
> - [访问像属性一样的字典键？-Python 实用宝典](https://pythondict.com/python-qa/访问像属性一样的字典键？/#:~:text=1%20所有python对象在内部将其属性存储在名为的字典中%20__dict__%20%E3%80%82%202%20不需要内部字典%20__dict__%20必须是“仅是简单的字典”，因此我们可以将,super%20%28%29%20的%20__init__%20%28%29%20方法，我们可以确保它（已经）的行为与字典完全相同，因为该函数将调用所有%20字典实例化%20代码%E3%80%82)

