---
title:
  - Python 之 deepcopy
authors: Ethan Lin
year: 2024-04-11
tags:
  - 类型/笔记
  - 日期/2024-04-11
  - 内容/编程语言/Python
---
# Python 之 deepcopy





> [!info] AI 建议
> 

### deepcopy 失效的情况

在Python中，`deepcopy`函数可能无法正确地复制以下类型的对象：

1. **对象包含循环引用**：如果对象的某个属性引用了对象本身，或者对象的属性之间存在循环引用，那么`deepcopy`可能无法正确地复制这个对象。这是因为`deepcopy`需要递归地复制对象的所有属性，而循环引用会导致这个递归过程无法结束。

2. **对象包含不可复制的属性**：如果对象的某个属性是不可复制的，那么`deepcopy`也无法正确地复制这个对象。例如，文件对象、线程对象、数据库连接对象等都是不可复制的。

3. **对象包含自定义类的实例**：如果对象的某个属性是自定义类的实例，而这个类没有实现`__deepcopy__`方法，那么`deepcopy`可能无法正确地复制这个属性。这是因为`deepcopy`并不知道如何复制这个类的实例。

4. **对象包含特殊方法的类的实例**：如果对象的某个属性是包含特殊方法（如`__getstate__`和`__setstate__`）的类的实例，那么`deepcopy`可能无法正确地复制这个属性。这是因为`deepcopy`在复制这个类的实例时，可能会调用这些特殊方法，而这些特殊方法的行为可能会影响复制的结果。

5. **对象包含函数或方法**：如果对象的某个属性是函数或方法，那么`deepcopy`可能无法正确地复制这个属性。这是因为函数和方法的复制需要特殊处理，而`deepcopy`并没有进行这种处理。