#类型/教程

#知识 

#资料 

#来源/转载



[[宏观经济]]

[[DSGE]]

[[DSGE编程]]



## DSGE建模与编程入门(7)：Dynare编程一





“男瘦，香菇”，因为9月以来“好累”哟，几乎每天都是21点-22点睡，6-7点多醒，白天从8-9点一直学习到20-21点，每天保证有效学习时间10个小时左右。哈哈！其实，我主要是想追一下最近的网络热词。但是，提起早睡早起这事，我真心地希望各位博士、各位研究者们也能按时睡觉，不要熬夜，天大的事也尽量不要熬夜，身体最重要！即使心里有事，也要放下，逼着自己躺下来闭目养神。——某位北大**男博士**要特别注意，嘻嘻！记得师姐曾说过，我们的目标就是毕业时不秃顶！哈哈！



然后，回应一下，另一位博士的疑惑。关于CES形式，之前我是用在生产函数中。很多论文和书里也是用在生产函数中，但是千万不要理解成CES是生产函数专用。CES形式只是一个加总算法，凡是需要加总分量的都可以利用CES形式。我们常见到的final production function就是利用CES形式加总每个intermediate production。其实，我们偶尔还会见到，没有final production，而是消费者直接消费各种中间产品，此时利用CES加总中间消费品成为一个综合消费品形式。上述两种情形本质上是一样的，千万不要换个“马甲”就不认识了。



好了！进入今天的主题——Dynare编程。

希望学习或者能用Dynare做文章的人，一定要先去下载一个Matlab安装一下！（其实还有其他平台的，此处就不多说，免得让那些患有选择综合征的人“犯病”）。

第一步，去Dynare官网下载Dynare 4.4.3 ，有windows版和mac版（http://www.dynare.org/download/dynare-stable）

第二步，双击**dynare-4.4.3-win.exe**安装Dyanre。记住你的安装路径，例如：**c:\dynare\4.4.3**。安装完成后，会出现几个子文件夹，**matlab、mex、doc**。

第三步，将Dynare的**matlab子文件夹**加入到Matlab软件的路径中：

第一种方式：在matlab软件的命令行输入：**addpath  \**c:\dynare\4.4.3\matlab\****

***\*![Image](640-20210302175824767.png)
\****

第二种方式：点击matlab软件的菜单**“Set Path”**或者**“设置路径”**

![Image](640-20210302175824701)

**“Add Folder...”**或者**“添加文件夹”**，

![Image](640-20210302175824700)

然后选择dynare安装路径中的matlab子文件夹

![Image](640-20210302175824712)

最后点击**“Save”**或者**“保存”即可。**



下面我用自己的一篇论文来讲解编程步骤。


Dynare编程句法

一个完整的DSGE code包含五个模块：

•（1）前言（preamble）：变量和参数列表

•（2）模型（model）：详细说明模型结构

•（3）稳态值或初值（initval）：对模型变量赋值，给出模型稳态值或者模拟/脉冲响应的初值（guess）

•（4）冲击（shocks）：定义经济系统冲击

•（5）数值计算（computation）：预测、模拟和IRFs





（1）前言（preamble）命令

•**var**  /*内生变量列表，用空格隔开，以分号“；”结束

•**varexo** /*外生变量列表。其他同上

•**parameters**  /*参数列表，并赋值



（2）模型命令

•**model****；**

**（输入均衡方程，每一个方程均以“；”结束）**

•**end****；**

**
**

**（3）初值模块命令**

**•\**initval\**\**；\****

**（\**输入内生变量的初值，每一个方程均以“；”结束。由于Dynare十分娇气，只能输入非常接近稳态的初值才能run出结果，所以我一般都是先求出稳态的近似值，然后输入。后面我们会介绍两种简单的稳态值求解方法。\**）**

**•\**end\**\**；\****

**•\**上面命令已经完结初值模块\****

**•\**steady\**\**；\**/\*在initval模块后加入\**steady\**命令是告诉dynare，上述初值只是稳态值的近似，做模拟和IRF的时候还是要从稳态值开始**

**•\**check\**\**；\**/\*这个命令是计算和展示出方程系统的特征根**

**
**

***\*（4）冲击-随机模型\****

***\*•\*\*shocks\*\*\*\*；\*\**\***

***\*•\*\*var e\*\*\*\*；\*\**\***

***\*•\*\*stderr=1\*\*\*\*；\*\**\***

***\*•\*\*end\*\*\*\*；\*\**\***

***\*
\****

***\*（5）计算模块-随机模型\****

***\*•\*\*stoch_simul[];\*\**\***



完整的随机模型的dynare code为

```octave
%如需引用，请注明许文立的版权，谢谢！
var C N I Y W R R_b K G A;

varexo e_a e_g;

parameters beta delta alpha theta chi rho_a rho_g omega;

beta=0.934;
delta=0.1;
alpha=0.503;
theta=0.5;
chi=3;
rho_a=0.72;
omega=0.14;
rho_g=0.43;

model;
C^(-1)=beta*(C(1)^(-1)*(R(1)+(1-delta)));
C^(-1)=beta*(C(1)^(-1)*(R_b+1));
W=(1-alpha)*A*K(-1)^(alpha)*N^(-alpha);
R=alpha*A*K(-1)^(alpha-1)*N^(1-alpha);
theta*N^(chi)=C^(-1)*W;
Y=A*K(-1)^(alpha)*N^(1-alpha);
Y=C+I+G;
K=I+(1-delta)*K(-1);
G=(omega*Y)^(1-rho_g)*G(-1)^rho_g*exp(e_g);
A=A(-1)^(rho_a)*exp(e_a);
end;

initval;
C=0.86*2.0935^(0.501/0.499)-0.1*2.0935^(1/0.499);
N=(1/0.5*0.499*2.0935^(0.501/0.499)/(0.86*2.0935^(0.501/0.499)-0.1*2.0935^(1/0.499)))^(1/4); 
I=0.1*2.0935^(1/0.499)*(1/0.5*0.499*2.0935^(0.501/0.499)/(0.86*2.0935^(0.501/0.499)-0.1*2.0935^(1/0.499)))^(1/4);
Y=2.0935^(0.501/0.499)*(1/0.5*0.499*2.0935^(0.501/0.499)/(0.86*2.0935^(0.501/0.499)-0.1*2.0935^(1/0.499)))^(1/4);
W=0.499*2.0935^(0.501/0.499);
R=0.1707; 
R_b=0.5; 
K=2.0935^(1/0.499)*(1/0.5*0.499*2.0935^(0.501/0.499)/(0.86*2.0935^(0.501/0.499)-0.1*2.0935^(1/0.499)))^(1/4); 
G=0.14*2.0935^(0.501/0.499)*(1/0.5*0.499*2.0935^(0.501/0.499)/(0.86*2.0935^(0.501/0.499)-0.1*2.0935^(1/0.499)))^(1/4);
A=1;
end;

steady;
check;

shocks;
var e_a;
stderr 1;
end;

shocks;
var e_g;
stderr 1;
end;

stoch_simul(order=1, periods=0,irf=20, conditional_variance_decomposition =[1:20]);

```



## DSGE建模与编程(8)：Dynare程序（二）



周末在西南财经大学开会，然后又去吃了点成都火锅，味道真是赞，哈哈，所以忘了写推送（其实就是懒癌犯了），再次给大家说声不好意思！

今天我打算再次推送DYNARE编程。一来，这是自己动手能力的最重要环节之一；二来，有人问我相关问题，在此也算是做个解答，谢谢那位给我反馈，并与我交流的那位勤奋的小孩。

 

在上次推文中，已经按照了Dynare，并有了matlab。在此基础上，进一步的详细步骤就没有给出，那么，接着我们应该干什么呢？

**第一步，编写mod****文件**（我个人偏好在txt文档中编辑，因为txt中没有格式变化。编辑好后，保存以便返修和查看等，最后copy进matlab）

1、点击**“主页”栏**中的**“新建脚本”**或者**“编辑器”栏**中的**“新建”**

![Image](640-20210302175930941)
![Image](640-20210302175930945)



2、将txt中的代码copy进新建脚本中

第一行应该声明模型的变量，包括内生变量，外生变量和参数。在dynare中，“var”后面跟着内生变量，并以分号结束（特别注意，一定要给出英文输入法下的分号“;”）。那么，第一行代码如下：

![Image](640-20210302175930938)



接下来的一行代码就声明外生变量。这些变量就是冲击，我的文章中有两个外生冲击，一个是技术，一个是财政支出，如下：

![Image](640-20210302175930944)

接下来，就是声明模型参数，如下

![Image](640-20210302175930983.png)



紧接着就是，给上述参数赋值，如下：

![Image](http://mmbiz.qpic.cn/mmbiz_png/QA2ILNosZr4tG4mULLddo1jenUVjIx5yIC4Vf1TWicoUaxu99ic9H350ak47f8LuumQ10tibGsLFiawy1lJJvq0hLw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

这样一来，模型的变量声明部分结束，我们要开始声明模型“model”。那么，我们**首先**要输入**“****model;****”**（注意model后面要接上英文输入下的分号“;”，注意注意注意，每一行代码都要以这个分号结束）。**然后**，下一行紧接着输入模型的**均衡方程系统**（一阶条件、约束条件和总和条件等），每一个方程一行命令，每一行后以分号结束。输入完方程后，下一行输入**“****end;****”**结束模型声明部分。

![Image](640-20210302175931295.png)

接下来，就要为内生变量赋予初始值。在这个部分以**“****initval;****”**开头，然后，每个内生变量都附一个**初始值**（注意，从迭代的角度来讲，这个值应该是guess出来的，但是…预知后事如何，请关注以后讲解，哈哈）。与model部分一样，最后以**“****end;****”**结束。

![Image](640-20210302175930998)

大家千万不要觉得很复杂，上面的每一个内生变量都是一个数字，只是我比较懒（哎呀，好像暴露了我自己呀，哈哈）才写成这么多计算式。

 

接下来一行，输入**“****steady;****”**。

![Image](640-20210302175930983)

输入steady是为了告知dynare，我们输入的初始值是一个近似值。强烈建议，一定要输入这个“steady;”命令。

 

接下来一行命令就是冲击。我们以**“****shocks;****”**开始，然后输入**外生冲击变量**（注意，每个外生冲击都要以**“****shocks;****”**开始），然后输入冲击的**标准差大小**，最后以**“****end;****”**结束。

![Image](640-20210302175930988.png)

最后，我们输入命令**“****stoch_simul****”**，这个命令就是解模型，生成我们想要的结果，默认的是政策函数、脉冲响应和无条件一阶二阶矩等。当然还有其他的一些选项，就是输入**“****stoch_simul(****选项)****”**

![Image](640-20210302175930986.png)

详细信息请参考dynare用户手册或者操作手册。

 

到这里，我们就输入完了一个简单的DSGE代码。

 

**第二步，保存mod****文件。**

给我们的mod文件去个filename，就apple吧。点击**“编辑器”**中的**“另存为”**

![Image](640-20210302175931122)

将其保存到dynare4.4.3的文件夹中，需要特别注意的是，文件名的后缀，一定要从“.m”改成**“****.mod****”，一定要注意。**

![Image](640-20210302175931093)

**第三步，更改matlab****的路径**。如果有需要的话，就是说，你的matlab地址路径栏中的默认路径如果不是上述mod文件保存路径的话，就需要改。

![Image](640-20210302175931048)

改成

![Image](640-20210302175931064-4679171.)

这个时候会在**“当前文件夹”**看到我们刚刚保存的mod文件apple。突然想起了apple—pen，哈哈！

![Image](640-20210302175931064)

第四步，在**命令行窗口**中输入**dynare apple**或者**dynare apple.mod**。然后，在点击电脑键盘上的“Enter”，最后，等着…出结果。

![Image](640-20210302175931083)

输出结果有

稳态值

![Image](640-20210302175931122.png)

政策和转移函数

![Image](640-20210302175931100.jpeg)

理论矩

![Image](640-20210302175931137)

方差分解结果



内生变量的相关系数

![Image](640-20210302175931159)

内生变量的自相关系数

![Image](640-20210302175931163.png)

脉冲响应图

![Image](640-20210302175931150)

 

 下周简要讨论一下稳态值的求解问题，会涉及到matlab的编程问题。

